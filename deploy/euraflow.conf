[group:euraflow]
programs=backend,worker,competitor
priority=999

[program:backend]
command=/opt/euraflow/venv/bin/uvicorn ef_core.app:app --host 0.0.0.0 --port 8000 --log-level info --access-log
directory=/opt/euraflow
user=euraflow
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=60
stdout_logfile=/var/log/euraflow/backend.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stderr_logfile=/var/log/euraflow/backend-error.log
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=5
environment=PATH="/opt/euraflow/venv/bin:/usr/bin:/bin"
priority=100

[program:worker]
command=/opt/euraflow/venv/bin/python -m plugins.ef.channels.ozon.services.watermark_task_runner
directory=/opt/euraflow
user=euraflow
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=60
stdout_logfile=/var/log/euraflow/worker.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stderr_logfile=/var/log/euraflow/worker-error.log
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=5
environment=PATH="/opt/euraflow/venv/bin:/usr/bin:/bin"
priority=200

[program:competitor]
command=/opt/euraflow/venv/bin/python -m plugins.ef.channels.ozon.services.competitor_task_runner
directory=/opt/euraflow
user=euraflow
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=60
stdout_logfile=/var/log/euraflow/competitor.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stderr_logfile=/var/log/euraflow/competitor-error.log
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=5
environment=PATH="/opt/euraflow/venv/bin:/usr/bin:/bin"
priority=300