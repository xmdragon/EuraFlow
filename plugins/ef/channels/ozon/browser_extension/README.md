# EuraFlow OZON选品助手浏览器扩展

智能采集OZON商品数据，支持上品帮和毛子ERP数据融合。

## 功能特性

- ✅ **智能数据融合**：自动从上品帮和毛子ERP提取数据并选择最佳值
- ✅ **数值优先**：价格、销量、佣金等数值字段自动取最大值
- ✅ **灵活适配**：仅一个工具可用时自动降级为单源模式
- ✅ **自动上传**：采集完成后自动上传到EuraFlow系统
- ✅ **虚拟滚动支持**：完全适配OZON的虚拟滚动机制

## 安装要求

### 前置条件
- 必须安装 **上品帮** 或 **毛子ERP** 至少一个工具
- Chrome 或 Edge 浏览器（版本 ≥ 88）

### 安装步骤

1. **下载扩展包**
   - 从发布页面下载最新的 `.zip` 文件
   - 解压到任意目录

2. **加载扩展**
   - 打开 Chrome/Edge 浏览器
   - 访问 `chrome://extensions/`（Edge: `edge://extensions/`）
   - 开启右上角的"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择解压后的 `dist/` 目录

3. **配置API**
   - 点击浏览器工具栏的扩展图标
   - 填写 API 地址（例如：`https://ozon.gxfc.life`）
   - 填写 API Key（从 EuraFlow 系统获取）
   - 点击"测试连接"验证配置

## 使用方法

1. 访问 OZON 商品列表页面
2. 等待页面加载完成，右下角会出现控制面板
3. 查看数据源状态（✅ 表示已检测到）
4. 设置目标商品数量（默认100）
5. 点击"开始采集"
6. 等待采集完成，数据会自动上传到 EuraFlow

## 融合策略

### 数值型字段（取最大值）
- 价格、销量、销售额、佣金率等

### 字符串型字段
- **品牌**：优先毛子ERP（中文识别更准）
- **其他**：取更长/更完整的值

### 日期型字段
- 取最新的日期值

### 仅一个数据源有值
- 自动使用该数据源的值

## 数据源支持

| 数据源 | 状态 | 特点 |
|--------|------|------|
| 上品帮 | ✅ 完整支持 | 价格、名称、链接、图片（必需） |
| 毛子ERP | ✅ 完整支持 | 物流数据准确、品牌识别准 |
| Seerfar | ❌ 未来支持 | 计划中 |

## 开发

### 环境要求
- Node.js ≥ 18
- npm ≥ 9

### 开发命令
```bash
# 安装依赖
npm install

# 开发模式（热更新）
npm run dev

# 类型检查
npm run type-check

# 构建生产版本
npm run build
```

### 项目结构
```
src/
├── content/           # 内容脚本（注入到OZON页面）
│   ├── parsers/       # 数据解析器（上品帮、毛子ERP）
│   ├── fusion/        # 智能融合引擎
│   ├── ui/            # 浮动控制面板
│   └── main.ts        # 入口文件
├── background/        # 后台服务（API通信）
├── popup/             # 扩展弹窗（配置界面）
└── shared/            # 共享类型和工具
```

## 常见问题

**Q: 为什么提示"未检测到数据工具"？**
A: 请确保已安装上品帮或毛子ERP，并在OZON商品列表页面刷新。

**Q: 数据中某些字段为空怎么办？**
A: 正常现象。不同工具提供的字段不同，扩展会自动融合所有可用数据。

**Q: 如何查看融合了哪些字段？**
A: 控制面板会显示每个数据源提供的字段数量。

**Q: 上传失败怎么办？**
A: 检查API配置是否正确，点击"测试连接"验证。

## 技术支持

如有问题，请联系 EuraFlow 技术团队。

## 许可证

MIT License
