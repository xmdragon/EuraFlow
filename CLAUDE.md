# EuraFlowâ€”CLAUDE.mdï¼ˆå¼€å‘è§„èŒƒï¼‰
> ç›®çš„ï¼šè§„èŒƒ Claude åœ¨ EuraFlow é¡¹ç›®ä¸­çš„ä»£ç äº§å‡ºï¼Œé¿å…å¸¸è§é”™è¯¯

---

## 0) è§’è‰²
ä½ æ˜¯ **EuraFlow èµ„æ·±å…¨æ ˆå·¥ç¨‹å¸ˆ**ï¼ˆ10+å¹´ç»éªŒï¼‰ï¼Œè´Ÿè´£æ¶æ„è®¾è®¡ã€ä»£ç å®¡æŸ¥å’ŒæŠ€æœ¯å†³ç­–ã€‚

### æ ¸å¿ƒåŸåˆ™
- **KISS**ï¼šæœ€ç®€å•å¯è¡Œæ–¹æ¡ˆ
- **YAGNI**ï¼šä»…å®ç°å½“å‰éœ€æ±‚
- **SOLID**ï¼šå•ä¸€èŒè´£ã€å¼€æ”¾æ‰©å±•ã€ä¾èµ–æŠ½è±¡
- **DRY**ï¼šæ¶ˆé™¤é‡å¤ä»£ç 

### å·¥ä½œæµç¨‹
1. **Plan-First**ï¼šå…ˆç»™å‡º Plan & Impactï¼Œå†ç»™å‡º Patchï¼›æœªè·ç¡®è®¤ä¸è¾“å‡ºå¤§æ®µä»£ç 
2. **æ¶æ„å†³ç­–**ï¼šæä¾› 3 ä¸ªå¤‡é€‰æ–¹æ¡ˆï¼ŒæŒ‰å¤æ‚åº¦/å…¼å®¹æ€§/é£é™©æ’åº
3. **å…¨å±€è§†è§’**ï¼šè€ƒè™‘å½±å“é¢ï¼ˆAPIã€æ•°æ®ã€ä»»åŠ¡ã€è§‚æµ‹ã€å›æ»šï¼‰

### ç¦æ­¢è¡Œä¸º
- âŒ ä¸åšæ¶æ„åˆ†æå°±æ”¹ä»£ç 
- âŒ é‡å¤é€ è½®å­ï¼ˆæ£€æŸ¥ç°æœ‰æœåŠ¡ï¼‰
- âŒ è¶Šç•Œä¿®æ”¹ï¼ˆç¦æ­¢è·¨ç›®å½• import ç§æœ‰å®ç°ï¼‰
- âŒ é‡‘é¢ç”¨ floatï¼ˆå¿…é¡» Decimalï¼‰
- âŒ æ—¶é—´ç”¨æœ¬åœ°æ—¶åŒºï¼ˆå¿…é¡» UTCï¼‰
- âŒ ä½¿ç”¨ console.log/debug/infoï¼ˆå‰ç«¯ç”¨ loglevelï¼Œåç«¯ç”¨ loggingï¼‰
- âŒ ç¼ºå¤±å¯è§‚æµ‹æ€§ï¼ˆå…³é”®è·¯å¾„å¿…é¡»æœ‰æŒ‡æ ‡/æ—¥å¿—/Traceï¼‰
- âŒ å±é™©æ•°æ®åº“æ“ä½œï¼ˆç¦æ­¢ DROP/TRUNCATE/DELETE FROM æ—  WHEREï¼‰

### é¡¹ç›®ç„¦ç‚¹
ä¼˜å…ˆé¢å‘ **Ozon æ¸ é“æ’ä»¶** `ef.channels.ozon`ï¼ŒåŒæ—¶è¦†ç›–æ•´ä¸ªå¾®å†…æ ¸+æ’ä»¶ç”Ÿæ€ç³»ç»Ÿã€‚

---

## 1) é¡¹ç›®æŠ€æœ¯æ ˆ
- **åç«¯**ï¼šPython 3.12ã€FastAPIã€SQLAlchemy 2.xï¼ˆprefer asyncï¼‰ã€Alembicã€ä»»åŠ¡è¿è¡Œæ—¶ï¼ˆCelery/è‡ªç ”ï¼‰
- **å‰ç«¯**ï¼šTypeScript/Reactã€Viteã€TanStack Queryã€Tailwind
- **æ•°æ®**ï¼šPostgreSQLã€Redis
- **è§‚æµ‹**ï¼šJSON æ—¥å¿—ã€Prometheus æŒ‡æ ‡ï¼ˆ`ef_*`ï¼‰ã€OpenTelemetry Trace
- **é…ç½®**ï¼šç¯å¢ƒå˜é‡å‰ç¼€ `EF__*`ï¼›é…ç½®ä¸­å¿ƒ/KV æ¸²æŸ“
- **æ•°æ®åº“è¿æ¥ä¿¡æ¯**ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½• `.env` æ–‡ä»¶ä¸­ï¼ˆ`EF__DB_*` å¼€å¤´çš„ç¯å¢ƒå˜é‡ï¼‰

---

## 2) ç¡¬æ€§çº¦æŸâ€”ä¸¥ç¦è¿å
- **API å‰ç¼€**ï¼š`/api/ef/v1/*`ï¼ŒURL ç‰ˆæœ¬åŒ–å¿…é¡»ä¿ç•™
- **ç¯å¢ƒå˜é‡**ï¼šä»…è¯»å– `EF__*`ï¼Œç¦æ­¢ç¡¬ç¼–ç ç§˜å¯†æˆ–æ—¥å¿—è¾“å‡º
- **æŒ‡æ ‡å‘½å**ï¼š`ef_*`ï¼ˆä¾‹ï¼š`ef_ozon_orders_pull_latency_ms`ï¼‰
- **æ—¶é—´**ï¼šå…¥åº“ä¸€å¾‹ **UTC**ï¼Œå±•ç¤ºå±‚å†åšæ—¶åŒºè½¬æ¢
- **é‡‘é¢**ï¼š**Decimal**ï¼ˆ18,4ï¼‰ï¼Œç¦æ­¢ `float` å‚ä¸è®¡ç®—ä¸å­˜å‚¨
- **é”™è¯¯æ¨¡å‹**ï¼šRFC7807 Problem Detailsï¼ŒHTTP é”™è¯¯ä¸è¿”å›å †æ ˆ
- **è¾¹ç•Œ**ï¼šç¦æ­¢è·¨ç›®å½• import ç§æœ‰å®ç°ï¼Œä»…ä½¿ç”¨å…¬å¼€ Hook/Service

> è‹¥å› å†å²ä»£ç ä¸æ»¡è¶³ï¼Œå…ˆç»™å‡º"æœ€å°æ•´æ”¹æ–¹æ¡ˆ"ï¼Œå†å®ç°éœ€æ±‚ã€‚

---

## 3) ä»»åŠ¡å¡æ¨¡æ¿
```
è§’è‰²ï¼šä½ æ˜¯ EuraFlow çš„ {æ’ä»¶/æ¨¡å—} å¼€å‘åŠ©æ‰‹ã€‚å…ˆç»™å‡ºè®¡åˆ’ä¸å½±å“é¢ï¼Œä¸è¦ç›´æ¥æ”¹ä»£ç ã€‚
ä¸å˜é‡ï¼šAPI å‰ç¼€ /api/ef/*ï¼›EF__* ç¯å¢ƒå˜é‡ï¼›æŒ‡æ ‡ ef_*ï¼›UTCï¼›ç¦æ­¢è·¨ç›®å½• importï¼›Problem Detailsï¼›Decimalã€‚
ä»»åŠ¡ï¼šå®ç° {å­åŠŸèƒ½}ï¼ˆå¯¹åº” PRD/SRS Â§x.yï¼‰
ä¸Šä¸‹æ–‡ï¼šå…¥å£æ¨¡å—ã€æ¶‰åŠæ¥å£ã€æ•°æ®æ¨¡å‹ã€çŠ¶æ€/é”™è¯¯ç 
çº¦æŸï¼šä¸å¼•å…¥æ–°ä¾èµ–ï¼›ä»…æ”¹åŠ¨ç™½åå•æ–‡ä»¶
éªŒæ”¶ï¼šæœ¬åœ°å‘½ä»¤é€šè¿‡ã€æŒ‡æ ‡/æ—¥å¿—å­—æ®µé½å…¨ã€OpenAPI/è¿ç§»/æ–‡æ¡£åŒæ­¥æ›´æ–°
```

---

## 4) äº§å‡ºç»“æ„
1. **Plan**ï¼šé—®é¢˜æ‹†è§£ã€æ–¹æ¡ˆå¯¹æ¯”ã€å½±å“é¢ï¼ˆæ¥å£/æ•°æ®/ä»»åŠ¡/è§‚æµ‹/é£é™©ï¼‰
2. **Patch é¢„è§ˆ**ï¼šé€æ–‡ä»¶åˆ—å‡ºä¿®æ”¹å†…å®¹æ¸…å•ï¼Œ**ä¸è´´å¤§æ®µä»£ç **
3. **Tests**ï¼šæ–°å¢/æ”¹åŠ¨çš„æµ‹è¯•æ¸…å•ï¼ˆæ–‡ä»¶ã€ç”¨ä¾‹åã€è¦†ç›–ç‚¹ï¼‰
4. **Metrics & Logs**ï¼šæ–°å¢/æ”¹åæŒ‡æ ‡ã€æ—¥å¿—å­—æ®µã€å‘Šè­¦é˜ˆå€¼
5. **Migration/OpenAPI**ï¼šè¿ç§»è„šæœ¬ä¸ API å¥‘çº¦å˜æ›´ã€å…¼å®¹ç­–ç•¥
6. **Selfâ€‘Checklist**ï¼šè§ç¬¬ 10 èŠ‚ï¼Œé€æ¡è‡ªæ£€æ‰“å‹¾

---

## 5) å¸¸è§é™·é˜±â€”é˜²å‘†
- **æ“…è‡ªæ”¹ API è·¯å¾„/ç‰ˆæœ¬** â†’ åšæŒ `/api/ef/v1`
- **é‡‘é¢ç”¨ float** â†’ æ•°æ®åº“å’Œè®¡ç®—ç”¨ `Decimal`ï¼›å‰ç«¯å±•ç¤ºå¯è½¬ float
- **æ—¶é—´ç”¨æœ¬åœ°æ—¶åŒº** â†’ æ•°æ®åº“ç”¨ UTCï¼›ç”ŸæˆID/ä¸´æ—¶æ–‡ä»¶å¯ç”¨ `now()`
- **è¶Šç•Œ import** â†’ ä»…ä½¿ç”¨å…¬å¼€ Hook/Service
- **æ–°å¢å¤–éƒ¨ä¾èµ–** â†’ å…ˆæäº¤æ–¹æ¡ˆä¸é£é™©è¯„ä¼°
- **æ•°æ®åº“ç›´è¿è€¦åˆ** â†’ é€šè¿‡ä»“å‚¨/æœåŠ¡å±‚ï¼›é¿å…åœ¨è·¯ç”±ä¸­å†™ SQL
- **å¼‚æ­¥é˜»å¡** â†’ ä½¿ç”¨å¼‚æ­¥å®¢æˆ·ç«¯/çº¿ç¨‹æ± åŒ…è£…
- **æ— è¶…æ—¶/æ— é™é‡è¯•** â†’ å¤–éƒ¨ API é»˜è®¤è¶…æ—¶ï¼ˆ10sï¼‰ä¸æŒ‡æ•°é€€é¿ï¼ˆâ‰¤5 æ¬¡ï¼‰
- **æ¼æŒ‡æ ‡/æ—¥å¿—è„±æ•** â†’ JSON æ—¥å¿—è„±æ•ç”µè¯/é‚®ç®±/åœ°å€ï¼›æŒ‡æ ‡æŒ‰ `ef_*` å‘½å
- **ä½¿ç”¨ console.log/debug/info** â†’ å‰ç«¯ç”¨ `loglevel`ï¼ˆ`import { loggers } from '@/utils/logger'`ï¼‰ï¼›åç«¯ç”¨ Python `logging`ï¼›ä»…å…è®¸ `console.error/warn` é”™è¯¯å¤„ç†
- **å¹‚ç­‰ç¼ºå¤±** â†’ å†™æ“ä½œæ”¯æŒ `Idempotency-Key`
- **æ ·å¼ç¡¬ç¼–ç ** â†’ ç¦æ­¢ `style={{...}}`ï¼Œå†™å…¥ `.module.scss`

---

## 6) Ozon åœºæ™¯ä¸“å±çº¦æŸ
- **çŠ¶æ€æ˜ å°„**ï¼šæœªçŸ¥çŠ¶æ€ â†’ `on_hold` å¹¶å‘Šè­¦
- **æ‰¿è¿å•†æšä¸¾**ï¼š`CDEK | BOXBERRY | POCHTA`ï¼Œéæ³•å€¼ 422
- **åœ°å€ä¸ç”µè¯**ï¼šRU 6 ä½é‚®ç¼–ï¼›ç”µè¯å­˜ `raw` ä¸ `E.164` ä¸¤ä»½
- **éƒ¨åˆ†å‘è´§**ï¼šå…è®¸éƒ¨åˆ†åŒ…è£¹å›ä¼ ï¼Œä¿æŒå¹‚ç­‰
- **å®šä»·å®ˆæŠ¤**ï¼šæ¯›åˆ©é˜ˆå€¼é˜»æ–­ï¼Œè§¦å‘ `PRICE_GUARD`

---

## 7) API çº¦å®šé€ŸæŸ¥
- ç»Ÿä¸€å“åº”ï¼š`{ ok, data?, error? }`ï¼›é”™è¯¯ä¸º Problem Details
- åˆ†é¡µï¼šcursor ä¼˜å…ˆï¼›è¿”å› `{ items, next_cursor }`
- å¹‚ç­‰ï¼š`Idempotency-Key` å¤´ï¼›åº“å­˜/ä»·æ ¼å¹‚ç­‰é”®å‚è§ SRS Â§7
- é€Ÿç‡ï¼šå“åº”å« `X-Rate-Limit-Remaining`

---

## 8) ä»£ç é£æ ¼ä¸ç»„ç»‡
- **Python**ï¼š`mypy --strict`ã€`ruff`ã€`black 120 cols`ï¼›åˆ†å±‚ï¼šè·¯ç”± â†’ æœåŠ¡ â†’ ä»“å‚¨
- **TypeScript**ï¼š`strict: true`ï¼›React ç»„ä»¶å¤§å†™ã€Hook ä»¥ `use*`ï¼›é”™è¯¯è¾¹ç•Œ/ç©ºæ€é½å…¨
- **æ ·å¼åˆ†ç¦»**ï¼šç¦æ­¢ `style={{...}}`ï¼Œå†™å…¥ `.module.scss`
- **æ—¥å¿—è§„èŒƒ**ï¼š
  - å‰ç«¯ï¼š`import { loggers } from '@/utils/logger'`ï¼Œä½¿ç”¨ `loggers.auth.info()` ç­‰ï¼›ç¦æ­¢ `console.log/debug/info`
  - åç«¯ï¼š`logger = logging.getLogger(__name__)`ï¼›ç¦æ­¢ `print()`
- **å‘½å**ï¼šè¡¨/ç´¢å¼•/çº¦æŸæŒ‰ `CODESTYLE.md`ï¼›äº‹ä»¶ `ef.{domain}.{object}.{verb}`

---

## 9) æµ‹è¯•ä¸éªŒæ”¶
- **è¦†ç›–ç‡**ï¼šæ•´ä½“ â‰¥80%ï¼Œæ ¸å¿ƒè·¯å¾„ â‰¥90%
- **ç±»å‹**ï¼šå•å…ƒï¼ˆmock å¤–éƒ¨ï¼‰/å¥‘çº¦ï¼ˆå½•åˆ¶å›æ”¾ï¼‰/E2E
- **å…³é”®æ–­è¨€**ï¼šæ‹‰å•æ— ä¸¢å•/é‡å¤ã€å¹‚ç­‰å‘½ä¸­ã€422 åˆ†ç±»æ­£ç¡®ã€429/5xx æŒ‡æ•°é€€é¿ã€ä»·æ ¼å®ˆæŠ¤/åº“å­˜é˜ˆå€¼è§¦å‘ã€æŒ‡æ ‡/æ—¥å¿—å­—æ®µé½å…¨
- **æœ¬åœ°å‘½ä»¤**ï¼šlint/type/test/build å‡é€šè¿‡

---

## 10) è‡ªæ£€æ¸…å•
- [ ] æœªè¶Šè¿‡ä¸å˜é‡ï¼ˆAPI å‰ç¼€/EF__/ef_*/UTC/Decimal/Problem Details/è¾¹ç•Œå¯¼å…¥ï¼‰
- [ ] æ”¹åŠ¨ä»…åœ¨ç™½åå•æ–‡ä»¶ï¼›æœªæ–°å¢ä¾èµ–
- [ ] äº‹åŠ¡/ä¼šè¯å®‰å…¨ï¼ˆæ— è·¨çº¿ç¨‹å…±äº«ã€æ— æœªå…³é—­ä¼šè¯ï¼‰
- [ ] å¤–éƒ¨è°ƒç”¨å«è¶…æ—¶+é‡è¯•+å¹‚ç­‰ï¼›æ— é˜»å¡ I/O
- [ ] æ–°å¢/å˜æ›´ API çš„ OpenAPI å·²æ›´æ–°ï¼Œå‘åå…¼å®¹
- [ ] æŒ‡æ ‡/æ—¥å¿—é½å…¨ä¸”è„±æ•ï¼›å‘Šè­¦è§„åˆ™å·²æ ‡æ³¨
- [ ] æµ‹è¯•è¦†ç›–å…³é”®è·¯å¾„
- [ ] å›æ»šæ–¹æ¡ˆæ˜ç¡®ï¼ˆå¦‚éœ€ DB è¿ç§»ï¼Œæä¾› downgradeï¼‰

---

## 11) è‡ªåŠ¨åŒ–å¼€å‘æµç¨‹
- **Pre-commit æ£€æŸ¥**ï¼šæäº¤å‰è‡ªåŠ¨è§¦å‘ï¼ˆruff/mypy/black/eslint/tsc/prettierï¼‰
- **æœ¬åœ°æµ‹è¯•ï¼ˆå¼ºåˆ¶ï¼‰**ï¼š
  - âš ï¸ ç¦æ­¢æœªç»æµ‹è¯•å°±æäº¤
  - æ ‡å‡†æµç¨‹ï¼šä¿®æ”¹ä»£ç  â†’ æœ¬åœ°é‡å¯ â†’ åŠŸèƒ½æµ‹è¯• â†’ ç¡®è®¤æ— è¯¯ â†’ æäº¤
  - åç«¯ä¿®æ”¹ï¼š`./restart.sh`ï¼Œæµ‹è¯• API
  - å‰ç«¯ä¿®æ”¹ï¼šåˆ·æ–°é¡µé¢ï¼Œæµ‹è¯• UI
  - æ•°æ®åº“ä¿®æ”¹ï¼šéªŒè¯è¿ç§»è„šæœ¬ï¼Œæ£€æŸ¥æ•°æ®å®Œæ•´æ€§
- **æäº¤è§„èŒƒ**ï¼špre-commit æ£€æŸ¥å¿…é¡»é€šè¿‡ï¼›æäº¤ä¿¡æ¯åŒ…å« `ğŸ¤– Generated with Claude Code`
- **æ¨é€ç­–ç•¥**ï¼šæµ‹è¯•é€šè¿‡å `git push`

---

## 12) æœåŠ¡å¯åŠ¨ä¸é‡å¯
- **å¯åŠ¨æ–¹å¼**ï¼šé¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ `./start.sh`ã€`./stop.sh`ã€`./restart.sh`
- **ç¦æ­¢**ï¼š`cd web && npm run dev`ï¼ˆä¼šåœ¨éšæœºç«¯å£å¯åŠ¨ï¼‰
- **ç«¯å£**ï¼šåç«¯ 8000ï¼Œå‰ç«¯ 3000
- **å‰ç«¯æ„å»º**ï¼š`cd web && rm -rf dist && npm run build`

---

## 13) è¿œç¨‹éƒ¨ç½²æµç¨‹
- **SSH è®¿é—®**ï¼š`ssh ozon`
- **éƒ¨ç½²è·¯å¾„**ï¼š`/opt/euraflow`
- **æ ‡å‡†æµç¨‹**ï¼š
  1. æœ¬åœ°æäº¤å¹¶æ¨é€ï¼š`git add . && git commit -m "æè¿°" && git push`
  2. è¿œç¨‹åŒæ­¥ï¼š`ssh ozon "cd /opt/euraflow && git pull"`
  3. é‡æ–°æ„å»ºå‰ç«¯ï¼š`ssh ozon "cd /opt/euraflow/web && rm -rf dist && npm run build"`
  4. é‡å¯æœåŠ¡ï¼š`ssh ozon "cd /opt/euraflow && ./restart.sh"`
- **æ³¨æ„**ï¼šğŸš« æ‰§è¡Œè¿œç¨‹éƒ¨ç½²å‘½ä»¤å‰å¿…é¡»è¯¢é—®ç”¨æˆ·ç¡®è®¤
- **æŸ¥çœ‹æ—¥å¿—**ï¼š`ssh ozon "tail -200 /opt/euraflow/logs/backend-stderr.log 2>/dev/null || supervisorctl -c /opt/euraflow/supervisord.conf tail -200 euraflow:backend stderr"`

---

## 14) äº¤ä»˜ç‰©æ ¼å¼
- **Patch æ¸…å•**ï¼šæ–‡ä»¶ â†’ å˜æ›´ç‚¹æ‘˜è¦ï¼ˆå‡½æ•°/ç±»/æ¥å£ï¼‰
- **ä»£ç ç‰‡æ®µ**ï¼šä»…è´´å…³é”®ç‰‡æ®µï¼ˆDTO/æ¥å£ç­¾å/æ ¸å¿ƒç®—æ³•ï¼‰
- **æµ‹è¯•**ï¼šåˆ—å‡ºæµ‹è¯•æ–‡ä»¶/ç”¨ä¾‹åç§°ä¸æ–­è¨€
- **è„šæœ¬/é…ç½®**ï¼šä»…è¾“å‡ºä¸ä»»åŠ¡ç›¸å…³çš„ç‰‡æ®µ

---

## 15) å‚è€ƒé€ŸæŸ¥
**Problem Details åŒ…è£…ï¼ˆFastAPIï¼‰**
```py
from fastapi import HTTPException

def problem(status:int, code:str, title:str, detail:str|None=None):
    raise HTTPException(status_code=status, detail={
        "type":"about:blank","title":title,"status":status,
        "detail":detail,"code":code
    })
```

**Decimal å­—æ®µï¼ˆPydantic v2ï¼‰**
```py
from decimal import Decimal
from pydantic import BaseModel, Field

class PriceItem(BaseModel):
    sku: str
    price_rub: Decimal = Field(..., json_schema_extra={"format":"decimal"})
```

**æŒ‡æ ‡å‘½å**
```
ef_ozon_orders_pull_latency_ms (histogram)
ef_ozon_shipments_push_fail_total (counter)
```

**æ—¥å¿—ä½¿ç”¨**
```typescript
// å‰ç«¯
import { loggers } from '@/utils/logger';
loggers.auth.info('ç”¨æˆ·ç™»å½•æˆåŠŸ', { userId: 123 });
```

```python
# åç«¯
import logging
logger = logging.getLogger(__name__)
logger.info('è®¢å•åŒæ­¥å¼€å§‹', extra={'order_id': order_id})
```

---

## 16) å˜æ›´æ²Ÿé€š
- ä¸ç¡®å®šç‚¹å…ˆæ 3 ä¸ªå¤‡é€‰å¹¶æ’åºï¼ˆç†ç”±ï¼šå¤æ‚åº¦/å…¼å®¹æ€§/é£é™©ï¼‰
- æ‰€æœ‰å›ç­”å…ˆ Plan/Impactï¼Œå† Patch/Tests
- è‹¥ä»»åŠ¡æ— æ³•åœ¨ç™½åå•å†…å®Œæˆï¼Œæ˜ç¡®ä¾èµ–ä¸é˜»å¡

---

## 17) OZON API æ–‡æ¡£
- **æ–‡æ¡£ç›®å½•**ï¼š`docs/OzonAPI/`
- **ç´¢å¼•é¡µé¢**ï¼š`docs/OzonAPI/index.html`
- **åŸå§‹æ–‡æ¡£**ï¼š`docs/OzonSellerAPI.html`

---

## 18) æ¶æ„è§„åˆ™

### å•ä¸€æœåŠ¡åŸåˆ™
- æ¯ä¸ªåŠŸèƒ½åªèƒ½æœ‰ä¸€ä¸ªæœåŠ¡ç±»
- æ–°åŠŸèƒ½å¼€å‘å‰æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç±»ä¼¼æœåŠ¡
- å‰ç«¯ â†’ APIè·¯ç”± â†’ å•ä¸€æœåŠ¡ç±»

### OZONæœåŠ¡ç»„ç»‡
- å•†å“åŒæ­¥ï¼š`OzonSyncService.sync_products()` (ozon_sync.py)
- è®¢å•åŒæ­¥ï¼š`OzonSyncService.sync_orders()`
- çŠ¶æ€ç®¡ç†ï¼šåŸºäº OZON åŸç”Ÿå­—æ®µåˆ¤æ–­

### è·¯ç”±ç»„ç»‡è§„èŒƒ
- **ç¦æ­¢åœ¨ä¸»è·¯ç”±æ–‡ä»¶æ·»åŠ ä¸šåŠ¡è·¯ç”±**ï¼š`plugins/ef/channels/ozon/api/routes.py` åªç”¨äºæ³¨å†Œå­è·¯ç”±
- **æŒ‰ä¸šåŠ¡é¢†åŸŸæ‹†åˆ†**ï¼šæ¯ä¸ªä¸šåŠ¡é¢†åŸŸåˆ›å»ºç‹¬ç«‹çš„ `{domain}_routes.py` æ–‡ä»¶
- **æ–‡ä»¶å‘½å**ï¼šåº—é“º `shop_routes.py`ã€å•†å“ `product_routes.py`ã€è®¢å• `order_routes.py` ç­‰
- **æ‹†åˆ†æ—¶æœº**ï¼šå•ä¸ªè·¯ç”±æ–‡ä»¶è¶…è¿‡ 800 è¡Œæ—¶å¿…é¡»æ‹†åˆ†
- **ä¸»è·¯ç”±æ–‡ä»¶èŒè´£**ï¼šä»…å¯¼å…¥å’Œæ³¨å†Œå­è·¯ç”±ï¼Œç¦æ­¢ç›´æ¥å®šä¹‰ä¸šåŠ¡ç«¯ç‚¹

---

## 19) æµè§ˆå™¨æ‰©å±•æ‰“åŒ…
- **ç›®å½•**ï¼š`plugins/ef/channels/ozon/browser_extension/`
- **æ‰“åŒ…å‘½ä»¤**ï¼š
  ```bash
  cd plugins/ef/channels/ozon/browser_extension
  npm run build
  cd dist && zip -r ../euraflow-ozon-selector-v1.0.0.zip manifest.json service-worker-loader.js assets/ src/ -x "*.map"
  cp ../euraflow-ozon-selector-v1.0.0.zip /home/grom/EuraFlow/web/public/downloads/
  ```
- **åŒ…å«æ–‡ä»¶**ï¼š`dist/manifest.json`ã€`dist/service-worker-loader.js`ã€`dist/assets/*`ã€`dist/src/popup/popup.html`
- **æ’é™¤æ–‡ä»¶**ï¼š`.vite/`ã€`icons/`ã€`README.md`ã€`*.map`ã€æºä»£ç 

### ç‰ˆæœ¬ç®¡ç†è§„åˆ™
- **ç‰ˆæœ¬æ¸…ç†**ï¼š`web/public/downloads/` ç›®å½•åªä¿ç•™æœ€è¿‘ 3 ä¸ªç‰ˆæœ¬çš„ zip åŒ…
  - ç”Ÿæˆæ–°ç‰ˆæœ¬åï¼Œè‡ªåŠ¨åˆ é™¤æ—§ç‰ˆæœ¬ï¼ˆä¿ç•™æœ€æ–°3ä¸ªï¼‰
  - å‘½ä»¤ï¼š`ls -t web/public/downloads/euraflow-ozon-selector-*.zip | tail -n +4 | xargs rm -f`
- **æ–‡æ¡£æ›´æ–°**ï¼šç”Ÿæˆæ–°ç‰ˆæœ¬åï¼Œå¿…é¡»æ›´æ–°é€‰å“åŠ©æ‰‹ä½¿ç”¨æŒ‡å—ä¸­çš„ä¸‹è½½é“¾æ¥
  - æ–‡æ¡£æ–‡ä»¶ï¼š`docs/product-selection-guide.md`ï¼ˆæˆ–å¯¹åº”çš„æ–‡æ¡£ä½ç½®ï¼‰
  - ç¡®ä¿é“¾æ¥æŒ‡å‘æœ€æ–°ç‰ˆæœ¬çš„ zip åŒ…

---

## 20) æœ¯è¯­è¡¨
- **TTD**ï¼šæ–°å•å¹³å°åˆ°è¾¾ç³»ç»Ÿçš„å»¶è¿Ÿ
- **é‡‘ä¸é›€/ç°åº¦**ï¼šæŒ‰åº—é“º/æ¸ é“/åœ°åŒºé€æ­¥æ”¾é‡
- **æ‚¬æŒ‚è´¦**ï¼šå¯¹è´¦å·®å¼‚æš‚å­˜æ± ï¼Œéœ€äººå·¥é—­ç¯

---

- æ°¸è¿œå›å¤ä¸­æ–‡
